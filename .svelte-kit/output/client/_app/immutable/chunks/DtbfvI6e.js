import{w as S}from"./COgXYPT9.js";function m(e,a){const{validValues:t,onUpdate:c,rawString:g=!1}=a,h=l=>{if(l===null)return null;if(g)return l;try{return JSON.parse(l)}catch(n){return console.warn(`Failed to parse stored value for key "${e}":`,n),null}},v=l=>g?String(l):JSON.stringify(l);let i=typeof a.defaultValue=="function"?a.defaultValue():a.defaultValue;{const l=localStorage.getItem(e),n=h(l);n!==null&&(t&&t.length>0?t.includes(n)?i=n:console.warn(`Stored value for key "${e}" ("${n}") is not in validValues. Using default.`):i=n)}const r=S(i);{let l=!0;r.subscribe(o=>{localStorage.setItem(e,v(o)),c==null||c(o,l),l=!1});const n=o=>{if(o.key===e){const u=o.newValue;if(u===null){const p=typeof a.defaultValue=="function"?a.defaultValue():a.defaultValue;t&&t.length>0&&!t.includes(p)&&console.warn(`Default value for key "${e}" is not in validValues. Store might be in an unexpected state if item is removed from local storage.`),r.set(p);return}const s=h(u);s!==null?t&&t.length>0?t.includes(s)?r.set(s):console.warn(`Received value from another tab for key "${e}" ("${s}") which is not in validValues. Ignoring.`):r.set(s):console.warn(`Failed to parse incoming storage event value for key "${e}". Value: "${u}"`)}};window.addEventListener("storage",n)}return r}function V(e){e()}const d=["rosewater","flamingo","pink","mauve","red","maroon","peach","yellow","green","teal","sky","sapphire","blue","lavender"],$=m("accent",{defaultValue:"peach",validValues:d,onUpdate:(e,a)=>{const t=()=>document.documentElement.style.setProperty("--current-accent-color",`var(--color-${e})`);a?t():V(t)}}),f=["latte","frappe","macchiato","mocha"];function y(){const e=localStorage.getItem("palette");return e&&f.includes(e)?e:(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>{a.matches?w.set("mocha"):w.set("latte")}),window.matchMedia("(prefers-color-scheme: dark)").matches?"mocha":"latte")}const w=m("palette",{defaultValue:y,validValues:f,onUpdate:(e,a)=>{const t=()=>{document.documentElement.classList.remove(...f),document.documentElement.classList.add(e)};a?t():V(t)}});function E(){const e=Math.floor(Math.random()*d.length);return d[e]}const k=m("background-enabled",{defaultValue:!1});export{$ as A,k as B,w as P,d as a,E as g,f as p};
