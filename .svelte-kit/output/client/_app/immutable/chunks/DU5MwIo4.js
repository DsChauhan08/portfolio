import{H as M}from"./DhUqbzPi.js";function m(e,a){throw new M(e,a)}const P=e=>e.split("/").pop().replace(/\.[^.]+$/,"");function d(e){return e.replace(/\\/g,"/")}async function g(e){return typeof e=="function"?await e():e}function v({modules:e,contentType:a,filter:i=()=>!0,sort:p=()=>0,slugFromPath:l}){const c=l?t=>l(d(t)):t=>P(d(t)),w=Object.entries(e).map(([t,o])=>{const n=d(t);return{path:n,slug:c(n),loader:o}}),h=new Map;w.forEach(t=>h.set(t.slug,t));const s=new Map;let u=null;async function y(){return u||(u=Promise.all(w.map(async({slug:t,loader:o,path:n})=>{let r=s.get(t);r||(r=await g(o),s.set(t,r));const f=r.metadata??r.frontmatter;if(!f)throw new Error(`Missing metadata for ${n}`);return{slug:t,metadata:f}})).then(t=>t.filter(i)).then(t=>t.sort(p))),u}async function $(t){const o=h.get(t);if(!o)throw m(404,`${a} not found: ${t}`);let n=s.get(t);n||(n=await g(o.loader),s.set(t,n));const r=n.metadata??n.frontmatter;if(!r)throw m(500,`Missing metadata for ${a}: ${t}`);if(!i({slug:t,metadata:r}))throw m(404,`${a} not found: ${t}`);return{slug:t,metadata:r,content:n.default}}async function E(t){return(await y()).slice(0,t)}return{getAll:y,getBySlug:$,getLatest:E}}function C({getAll:e,getBySlug:a}){return{prerender:!0,entries:async()=>(await e()).map(c=>({slug:c.slug})),load:async c=>a(c.params.slug)}}export{C as a,v as c};
